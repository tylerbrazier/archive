"use strict";$(document).ready(function(){function e(){$(".field").on("change keyup paste",function(){return t("file:modified")}),$("#fileSave").on("click",function(){return t("file:saving")}),$("#fileDelete").on("click",function(){return r()}),$(document).on({"file:saving":function(){return i()},"file:saved":function(e,n){return location.hash="#"+n}})}function n(){var e=location.hash.substring(1);e&&api("GET",null,function(n,i){if(n)return t("app:error",n);var r=i.files[e];return r?void t("file:loaded",e,r.content):t("app:error",e+" not found")})}function i(){var e={files:{}},n=$("#fileName"),i=n.val(),r=n.attr("data-originalName")||i,o=$("#fileContent").val();return i?o?(e.files[r]={filename:i,content:o},void api("PATCH",e,function(e,n){return e?t("app:error",e):void t("file:saved",i)})):t("app:error","No content"):t("app:error","No file name")}function r(){var e=$("#fileName").attr("data-originalName");if(!e)return t("app:error","This file hasn't been saved yet");if(confirm("Delete this file?")){var n={files:{}};n.files[e]=null,api("PATCH",n,function(e,n){return e?t("app:error",e):void(location.href="index.html")})}}function t(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];$(document).trigger(e,i)}e(),n()});