"use strict";function api(t,e,s){function r(t,e,r){var n="Error "+t.status+": ";n+=t.responseJSON&&t.responseJSON.message?t.responseJSON.message:r,s(n)}var n=localStorage.getItem("token");if(!n)return s("First set your API token on the settings page");var o=localStorage.getItem("gistId");if(!o)return s("First set your gist on the settings page");var a={url:"https://api.github.com/gists/"+o,method:t,headers:{Authorization:"token "+n},dataType:"json",error:r,success:function(t){return s(null,t)}};"GET"===t&&(a.cache=!1),e&&(a.data=JSON.stringify(e),a.contentType="application/json"),$.ajax(a)}